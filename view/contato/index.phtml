<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/datatable/dataTasbles.min.css" rel="stylesheet">
  <link href="assets/datatable/dataTables.bootstrap5.css" rel="stylesheet">
  <style>
    .btn-circle {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      padding: 6px 0;
      text-align: center;
      font-size: 20px;
      line-height: 1.42857;
    }
    .avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 8px;
    }
    body {
      padding-top: 70px;
    }
  </style>
</head>
<body class="bg-light">

  <!-- Navbar com avatar e dropdown -->
  <?php import('view.layout.navbar') ?>

  <!-- ConteÃºdo principal -->
  <div class="container py-5" id="vue-app">

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">Contatos</h4>
      <button class="btn btn-success btn-circle" style="background: #00E676" onclick="openModal('modal-cadastrar')">
        <i class="bi bi-plus"></i>
      </button>
    </div>
          <div class="form-group mt-3">
            <input type="text" class="form-control" id="filter" placeholder="Buscar contato..." />
          </div>
    <div class="table-responsive mt-4">
      <table class="table table-striped table-bordered align-middle shadow-sm dt_table">
        <thead class="table-success">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th class="text-center"><i class="bi bi-gear"></i></th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="d in data">
            <td>{{d.nm_contato}}</td>
            <td>maria@example.com</td>
            <td class="text-center">
              <button class="btn btn-outline-primary btn-sm">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn btn-outline-success btn-sm">
                <i class="bi bi-telephone"></i>
              </button>
              <button class="btn btn-outline-danger btn-sm">
                <i class="bi bi-trash-fill"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <?php import('view.contato.modal-cadastrar') ?>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/jquery-3.7.1.min.js"></script>
  <script src="assets/datatable/dataTables.min.js"></script>
  <script src="assets/datatable/dataTables.bootstrap5.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="view/js/main.js"></script>
<script>
const { createApp, ref, onMounted } = Vue

createApp({
  setup() {
    const data = ref([]);
    const get_contatos = async () => {
      try {
        let response = await fetch('?controle=contato&metodo=listarPorUsuario');
        let json = await response.json();
        data.value = json.data;
        console.log(data.value);
      } catch (error) {
        data.value = [];
        console.log(error);
      }
    };

    onMounted(() => {
      get_contatos();
      setTimeout(() => {
        let table = new DataTable('.dt_table');
      }, 500);
    });

    return { data };
  }
}).mount('#vue-app')
</script>

</body>
</html>
